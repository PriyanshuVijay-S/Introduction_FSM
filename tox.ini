# This file is auto-generated by compose CLI tool

[tox]
envlist = black, black-check, isort, isort-check, flake8, mypy, pylint
skip_missing_interpreters = True

[testenv]
deps =
    open-aea==1.60.0
    open-aea-ledger-ethereum==1.60.0
    open-aea-ledger-cosmos==1.60.0
    open-autonomy==0.18.3
    open-aea-test-autonomy==0.18.3

[testenv:black]
skipsdist = True
skip_install = True
deps =
    tomte[black]==0.2.17
commands =
    black packages/

[testenv:black-check]
skipsdist = True
skip_install = True
deps =
    tomte[black]==0.2.17
commands =
    black --check packages/

[testenv:isort]
skipsdist = True
skip_install = True
deps =
    tomte[isort]==0.2.17
commands =
    isort packages/ --gitignore

[testenv:isort-check]
skipsdist = True
skip_install = True
deps =
    tomte[isort]==0.2.17
commands =
    isort --check-only --gitignore packages/

[testenv:flake8]
skipsdist = True
skip_install = True
deps =
    tomte[flake8]==0.2.17
commands =
    flake8 packages/

[testenv:mypy]
skipsdist = True
skip_install = True
deps =
    tomte[mypy]==0.2.17
commands =
    mypy packages/ --config-file tox.ini

[testenv:pylint]
whitelist_externals = /bin/sh
skipsdist = True
skip_install = True
deps =
    tomte[pylint]==0.2.17
commands =
    pylint --rcfile={toxinidir}/.pylintrc packages/ -j 0

[testenv:darglint]
skipsdist = True
skip_install = True
deps =
    tomte[darglint]==0.2.17
commands =
    darglint packages/

[testenv-packages]
deps =
    {[testenv]deps}
commands =
    autonomy init --reset --author ci --remote --ipfs --ipfs-node "/dns/registry.autonolas.tech/tcp/443/https"
    autonomy packages sync
    aea test --cov --append packages -p no:hypothesispytest {posargs}

[testenv:packages-py3.8-linux]
skip_install = True
basepython = python3.8+
platform=^linux$
deps = {[testenv-packages]deps}
commands = {[testenv-packages]commands}

[testenv:packages-py3.9-linux]
skip_install = True
basepython = python3.9
platform=^linux$
deps = {[testenv-packages]deps}
commands = {[testenv-packages]commands}

[testenv:packages-py3.10.9-linux]
skip_install = True
basepython = python3.10
platform=^linux$
deps = {[testenv-packages]deps}
commands = {[testenv-packages]commands}

[testenv:packages-py3.11-linux]
skip_install = True
basepython = python3.11
platform=^linux$
deps = {[testenv-packages]deps}
commands = {[testenv-packages]commands}

[testenv:packages-py3.8-win]
skip_install = True
basepython = python3.8
platform=^win32$
deps = {[testenv-packages]deps}
commands = {[testenv-packages]commands}

[testenv:packages-py3.9-win]
skip_install = True
basepython = python3.9
platform=^win32$
deps = {[testenv-packages]deps}
commands = {[testenv-packages]commands}

[testenv:packages-py3.10.9-win]
skip_install = True
basepython = python3.10
platform=^win32$
deps = {[testenv-packages]deps}
commands = {[testenv-packages]commands}

[testenv:packages-py3.11-win]
skip_install = True
basepython = python3.11
platform=^win32$
deps = {[testenv-packages]deps}
commands = {[testenv-packages]commands}

[testenv:packages-py3.8-darwin]
skip_install = True
basepython = python3.8
platform=^darwin$
deps = {[testenv-packages]deps}
commands = {[testenv-packages]commands}

[testenv:packages-py3.9-darwin]
skip_install = True
basepython = python3.9
platform=^darwin$
deps = {[testenv-packages]deps}
commands = {[testenv-packages]commands}

[testenv:packages-py3.10.9-darwin]
skip_install = True
basepython = python3.10
platform=^darwin$
deps = {[testenv-packages]deps}
commands = {[testenv-packages]commands}

[testenv:packages-py3.11-darwin]
skip_install = True
basepython = python3.11
platform=^darwin$
deps = {[testenv-packages]deps}
commands = {[testenv-packages]commands}

[isort]
# for black compatibility
multi_line_output=3
include_trailing_comma=True
force_grid_wrap=0
use_parentheses=True
ensure_newline_before_comments = True
line_length=88
# custom configurations
order_by_type=False
case_sensitive=True
lines_after_imports=2
skip=
skip_glob =
known_packages=packages
known_local_folder=tests
sections=FUTURE,STDLIB,THIRDPARTY,FIRSTPARTY,PACKAGES,LOCALFOLDER

[flake8]
paths=packages
exclude=.md,
    *_pb2.py,
    custom_types.py,
    *_pb2_grpc.py,
    packages/*/__init__.py,
    packages/open_aea/*/__init__.py,
    packages/valory/*/__init__.py,
    packages/open_aea/protocols/signing,
    packages/valory/protocols/acn,
    packages/valory/protocols/http,
    packages/valory/protocols/ledger_api,
    packages/valory/protocols/contract_api,
    packages/valory/protocols/abci,
    packages/valory/protocols/ipfs,
    packages/valory/protocols/tendermint,
    packages/valory/contracts/gnosis_safe,
    packages/valory/contracts/gnosis_safe_proxy_factory,
    packages/valory/contracts/service_registry,
    packages/valory/contracts/multisend,
    packages/valory/connections/http_client,
    packages/valory/connections/ledger,
    packages/valory/connections/p2p_libp2p_client,
    packages/valory/connections/abci,
    packages/valory/connections/ipfs,
    packages/valory/skills/abstract_abci,
    packages/valory/skills/abstract_round_abci,
    packages/valory/skills/registration_abci,
    packages/valory/skills/transaction_settlement_abci,
    packages/valory/skills/reset_pause_abci
max-line-length = 88
select = B,C,D,E,F,I,W,
ignore = E203,E501,W503,D202,B014,D400,D401,DAR
application-import-names = packages,tests,scripts

[mypy]
python_version = 3.10
strict_optional = True
exclude=(.*_pb2|.*custom_types|packages/open_aea/protocols/signing|packages/valory/protocols/acn|packages/valory/protocols/http|packages/valory/protocols/ledger_api|packages/valory/protocols/contract_api|packages/valory/protocols/abci|packages/valory/protocols/ipfs|packages/valory/protocols/tendermint|packages/valory/contracts/gnosis_safe|packages/valory/contracts/gnosis_safe_proxy_factory|packages/valory/contracts/service_registry|packages/valory/contracts/multisend|packages/valory/connections/http_client|packages/valory/connections/ledger|packages/valory/connections/p2p_libp2p_client|packages/valory/connections/abci|packages/valory/connections/ipfs|packages/valory/skills/abstract_abci|packages/valory/skills/abstract_round_abci|packages/valory/skills/registration_abci|packages/valory/skills/transaction_settlement_abci|packages/valory/skills/reset_pause_abci)

[mypy-requests]
ignore_missing_imports=True

[mypy-yaml]
ignore_missing_imports=True

[mypy-toml]
ignore_missing_imports=True

[mypy-click.*]
ignore_missing_imports=True

[mypy-autonomy.*]
ignore_missing_imports=True

[darglint]
docstring_style=sphinx
strictness=short
ignore_regex=async_act
ignore=DAR401